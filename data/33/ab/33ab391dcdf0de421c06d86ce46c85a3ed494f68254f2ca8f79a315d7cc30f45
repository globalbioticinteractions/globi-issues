[{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/359109154","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/332#issuecomment-359109154","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/332","id":359109154,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTEwOTE1NA==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T22:37:20Z","updated_at":"2018-01-19T22:37:20Z","body":"@Irallia thanks for the detail . . . I poked around a bit and it looks we're hitting a resource constraint issue - pages of 50k interactions with offsets in the order of millions is putting quite some strain on the system. Am thinking about ways to make this work. Meanwhile ... @derele any update on the server hosting ?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/359109154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/360997748","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/332#issuecomment-360997748","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/332","id":360997748,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MDk5Nzc0OA==","user":{"login":"Irallia","id":5746285,"node_id":"MDQ6VXNlcjU3NDYyODU=","avatar_url":"https://avatars.githubusercontent.com/u/5746285?v=4","gravatar_id":"","url":"https://api.github.com/users/Irallia","html_url":"https://github.com/Irallia","followers_url":"https://api.github.com/users/Irallia/followers","following_url":"https://api.github.com/users/Irallia/following{/other_user}","gists_url":"https://api.github.com/users/Irallia/gists{/gist_id}","starred_url":"https://api.github.com/users/Irallia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Irallia/subscriptions","organizations_url":"https://api.github.com/users/Irallia/orgs","repos_url":"https://api.github.com/users/Irallia/repos","events_url":"https://api.github.com/users/Irallia/events{/privacy}","received_events_url":"https://api.github.com/users/Irallia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-27T16:54:04Z","updated_at":"2018-01-27T16:54:04Z","body":"I have to adapt my problem description.\r\nFor free-livings I get even with the first request this error. At the parasites later. I have adapted my code a bit to request only partial information. That has shown this problem.\r\nI can't see the difference. I tried to run it with less interactions in one query, but this changed nothing.\r\nAnd I do not understand why I got some free-livings before. Here is my output:\r\n\r\n[1] \"2018-01-27 17:51:40 CET\"\r\n[1] \"--------  Freeliving : --------\"\r\n[1] \"Freeliving source:\"\r\nError in file(file, \"rt\") : cannot open connection\r\nCalls: main ... get_interactions_by_taxa -> read_csv -> <Anonymous> -> read.table -> file\r\nIn addition: Warning message:\r\nIn file(file, \"rt\") :\r\n  URL 'https://api.globalbioticinteractions.org:443/interaction?&interactionType=preysOn&interactionType=eats&interactionType=flowersVisitedBy&interactionType=hasPathogen&interactionType=pollinatedBy&interactionType=hasParasite&interactionType=hostOf&field=source_taxon_external_id&field=source_taxon_name&field=source_taxon_path&field=source_specimen_life_stage&field=interaction_type&field=target_taxon_external_id&field=target_taxon_name&field=target_taxon_path&field=target_specimen_life_stage&field=latitude&field=longitude&field=study_citation&field=study_external_id&field=study_source_citation&limit=40000&skip=0&taxonIdPrefix=OTT&bbox=&includeObservations=f&type=csv': status was '500 Internal Server Error'\r\nExecution halted\r\n\r\nhttps://github.com/Irallia/IZW-HU-Parasites/blob/master/metadata/get_interactions.R\r\n\r\nI hope I do not bother you and it is in truth a problem in my code.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/360997748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/361065736","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/332#issuecomment-361065736","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/332","id":361065736,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MTA2NTczNg==","user":{"login":"derele","id":145716,"node_id":"MDQ6VXNlcjE0NTcxNg==","avatar_url":"https://avatars.githubusercontent.com/u/145716?v=4","gravatar_id":"","url":"https://api.github.com/users/derele","html_url":"https://github.com/derele","followers_url":"https://api.github.com/users/derele/followers","following_url":"https://api.github.com/users/derele/following{/other_user}","gists_url":"https://api.github.com/users/derele/gists{/gist_id}","starred_url":"https://api.github.com/users/derele/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/derele/subscriptions","organizations_url":"https://api.github.com/users/derele/orgs","repos_url":"https://api.github.com/users/derele/repos","events_url":"https://api.github.com/users/derele/events{/privacy}","received_events_url":"https://api.github.com/users/derele/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-28T14:09:36Z","updated_at":"2018-01-28T14:09:36Z","body":"Hi @jhpoelen \r\nsorry for the long silence. We will find a quick solution now with a commercial hosting service. See your Email for details.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/361065736/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/361334318","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/332#issuecomment-361334318","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/332","id":361334318,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MTMzNDMxOA==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-29T18:10:12Z","updated_at":"2018-01-29T18:10:40Z","body":"@Irallia thanks for sharing - I think your code is looking just fine - the requests you are making are quite computationally intensive because of the large number of records requested combined with the way the queries are being processed. I've been working on an alternate approach that might suit your situation a little better. Thanks for being patient!","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/361334318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/361360526","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/332#issuecomment-361360526","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/332","id":361360526,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MTM2MDUyNg==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-29T19:35:36Z","updated_at":"2018-01-29T19:42:50Z","body":"@Irallia I've prepared an archive at https://depot.globalbioticinteractions.org/datasets/org/globalbioticinteractions/interactions/0.1/interactions-0.1-ott.zip . This archive contains *all* interaction records from datasets known to GloBI expressed in Open Tree of Life Taxa (OTT) whenever possible. Could you please have a look at the archive and let me know whether (1) you can access the data and (2) whether the archive contains the information you need to do your analysis. Please note that interactions are expressed in the \"direction\" expressed in the original datasets. This means that trophic interactions might be expressed as ```man eats dog``` or ```dog eatenBy man```. You can find all interaction types here: https://github.com/jhpoelen/eol-globi-data/blob/master/eol-globi-lib/src/main/java/org/eol/globi/domain/InteractType.java . \r\n\r\nWith this approach, you should be able to do fast data processing locally (e.g., filtering, transforming) without having to wait for a server to do some crunching. Also, you can easily archive/republish the datasets you are working with. \r\n\r\nCurious to hear your thoughts on this approach. ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/361360526/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/361809755","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/332#issuecomment-361809755","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/332","id":361809755,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MTgwOTc1NQ==","user":{"login":"Irallia","id":5746285,"node_id":"MDQ6VXNlcjU3NDYyODU=","avatar_url":"https://avatars.githubusercontent.com/u/5746285?v=4","gravatar_id":"","url":"https://api.github.com/users/Irallia","html_url":"https://github.com/Irallia","followers_url":"https://api.github.com/users/Irallia/followers","following_url":"https://api.github.com/users/Irallia/following{/other_user}","gists_url":"https://api.github.com/users/Irallia/gists{/gist_id}","starred_url":"https://api.github.com/users/Irallia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Irallia/subscriptions","organizations_url":"https://api.github.com/users/Irallia/orgs","repos_url":"https://api.github.com/users/Irallia/repos","events_url":"https://api.github.com/users/Irallia/events{/privacy}","received_events_url":"https://api.github.com/users/Irallia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-31T03:08:37Z","updated_at":"2018-01-31T03:08:37Z","body":"Yes I can access the data and it is perfect for me. Thank you! I got all my data now. :)","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/361809755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/362373502","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/332#issuecomment-362373502","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/332","id":362373502,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MjM3MzUwMg==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-01T19:22:16Z","updated_at":"2018-02-01T19:23:15Z","body":"@Irallia happy to hear that the file archives work out for you and looking forward to learning about the outcomes of your research project!\r\n\r\nIt still leaves this issue related to paging through relatively large datasets through the web api, so we should probably keep this issue open. ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/362373502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/533753024","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/332#issuecomment-533753024","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/332","id":533753024,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzc1MzAyNA==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-21T00:43:20Z","updated_at":"2019-09-21T00:43:20Z","body":"I was able to download data using original query . Downloads are now more efficient after introducing streaming in https://github.com/globalbioticinteractions/globalbioticinteractions/releases/tag/v0.12.3 . Please see attached result of executing:\r\n\r\n```shell\r\n$ curl \"https://api.globalbioticinteractions.org/interaction?&interactionType=preysOn&interactionType=eats&interactionType=flowersVisitedBy&interactionType=hasPathogen&interactionType=pollinatedBy&interactionType=hasParasite&interactionType=hostOf&field=source_taxon_external_id&field=source_taxon_name&field=source_taxon_path&field=source_specimen_life_stage&field=interaction_type&field=target_taxon_external_id&field=target_taxon_name&field=target_taxon_path&field=target_specimen_life_stage&field=latitude&field=longitude&field=study_citation&field=study_external_id&field=study_source_citation&limit=40000&skip=0&taxonIdPrefix=OTT&bbox=&includeObservations=f&type=csv\" | pv -l > interaction-issue332.csv \r\n```\r\n[interaction-issue332.zip](https://github.com/globalbioticinteractions/globalbioticinteractions/files/3638171/interaction-issue332.zip)\r\n\r\nPlease re-open if the issue remains.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/533753024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]