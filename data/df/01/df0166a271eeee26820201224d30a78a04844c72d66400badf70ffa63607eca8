[{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/849163718","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/668#issuecomment-849163718","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/668","id":849163718,"node_id":"MDEyOklzc3VlQ29tbWVudDg0OTE2MzcxOA==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-26T22:31:06Z","updated_at":"2021-05-26T22:38:24Z","body":"Oops, I just introduced a new index that dropped the ability to do a row-scan #544. \r\n\r\nThanks for letting me know. You already guessed one way to get to some of the inaturalist records.\r\n\r\nhttps://api.globalbioticinteractions.org/interaction?accordingTo=globi:globalbioticinteractions/inaturalist&field=study_url&includeObservations=true&limit=10&skip=0\r\n\r\nThis includes all the iNaturalist records indexed directly from iNaturalist. If you'd like to include *all* inaturalist records, indexed via other non-iNaturalist sources, perhaps easier and faster to just do a regex on interactions.tsv.gz. This way, you'd also pick up iNaturalist observations that are referenced in natural history collections, but not directly in iNaturalist itself. \r\n\r\nCurious to hear what you prefer and open to suggestions. \r\n\r\nSomething along the lines of:\r\n\r\n```\r\n$ curl --silent \"https://depot.globalbioticinteractions.org/snapshot/target/data/tsv/interactions.tsv.gz\"\\\r\n | gunzip\\\r\n | grep -o -P \"https://www.inaturalist.org/observations/[0-9]+\"\\\r\n | head\r\nhttps://www.inaturalist.org/observations/78775212\r\nhttps://www.inaturalist.org/observations/78756420\r\nhttps://www.inaturalist.org/observations/78118778\r\nhttps://www.inaturalist.org/observations/78747562\r\nhttps://www.inaturalist.org/observations/78775210\r\nhttps://www.inaturalist.org/observations/48361326\r\nhttps://www.inaturalist.org/observations/76254544\r\nhttps://www.inaturalist.org/observations/40321613\r\nhttps://www.inaturalist.org/observations/46275356\r\nhttps://www.inaturalist.org/observations/50179635\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/849163718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/849165507","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/668#issuecomment-849165507","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/668","id":849165507,"node_id":"MDEyOklzc3VlQ29tbWVudDg0OTE2NTUwNw==","user":{"login":"kueda","id":22691,"node_id":"MDQ6VXNlcjIyNjkx","avatar_url":"https://avatars.githubusercontent.com/u/22691?v=4","gravatar_id":"","url":"https://api.github.com/users/kueda","html_url":"https://github.com/kueda","followers_url":"https://api.github.com/users/kueda/followers","following_url":"https://api.github.com/users/kueda/following{/other_user}","gists_url":"https://api.github.com/users/kueda/gists{/gist_id}","starred_url":"https://api.github.com/users/kueda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kueda/subscriptions","organizations_url":"https://api.github.com/users/kueda/orgs","repos_url":"https://api.github.com/users/kueda/repos","events_url":"https://api.github.com/users/kueda/events{/privacy}","received_events_url":"https://api.github.com/users/kueda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-26T22:35:31Z","updated_at":"2021-05-26T22:35:31Z","body":"Is `globi:globalbioticinteractions/inaturalist` going to be stable for the foreseeable future? If so, probably just easiest for us to switch to that. How frequently does `interactions.tsv.gz` get updated?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/849165507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/849169243","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/668#issuecomment-849169243","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/668","id":849169243,"node_id":"MDEyOklzc3VlQ29tbWVudDg0OTE2OTI0Mw==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-26T22:45:45Z","updated_at":"2021-05-26T22:53:05Z","body":"```interactions.tsv.gz``` is a flat file, no queries required on my end, and is updated automatically about every week or more frequently. \r\n\r\nthe paging web api uses the same data, updated at same frequency, and just requires a bunch more web requests, especially at the rate that the number of interactions from iNaturalist are increasing. \r\n\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/849169243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/849169922","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/668#issuecomment-849169922","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/668","id":849169922,"node_id":"MDEyOklzc3VlQ29tbWVudDg0OTE2OTkyMg==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-26T22:47:44Z","updated_at":"2021-05-26T22:47:44Z","body":"And yes, I expect ```globi:globalbioticinteractions/inaturalist``` to be supported in the foreseeable future.  ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/849169922/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/849171075","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/668#issuecomment-849171075","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/668","id":849171075,"node_id":"MDEyOklzc3VlQ29tbWVudDg0OTE3MTA3NQ==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-26T22:50:53Z","updated_at":"2021-05-26T22:51:42Z","body":"I can also imagine building a special index for id patterns. I imagine others might benefit from this also. \r\n\r\nSomething like:\r\n```\r\n...?accordingTo=idPattern:inaturalist\r\n```\r\n\r\nwhere id patterns are defined in some table like:\r\n\r\nhttps://github.com/bio-guoda/preston-identifier-registry/blob/main/registry.tsv\r\n\r\nCurious to hear your thoughts.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/849171075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/849802501","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/668#issuecomment-849802501","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/668","id":849802501,"node_id":"MDEyOklzc3VlQ29tbWVudDg0OTgwMjUwMQ==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-27T17:15:42Z","updated_at":"2021-05-27T17:16:38Z","body":"@kueda In looking at your integration code at https://github.com/inaturalist/inaturalist/blob/768b9263931ebeea229bbc47d8442ca6b0377d45/tools/globi_observation_links.rb it might be easiest to go with your initial intuition for now (e.g., ```accordingTo=globi:globalbioticinteractions/inaturalist``` instead of ```accordingTo=inaturalist```) . \r\n\r\nAlso, I've added a shortcut/redirect to continue supporting the previous integration by adding a ```accordingTo=globi:globalbioticinteractions/inaturalist``` whenever a ```accordingTo=inaturalist``` is observed.  With this patch, you should be a able to get the desired results with the old/existing behavior.\r\n\r\nSo, now, as previous expected:\r\n```\r\n$ curl \"https://api.globalbioticinteractions.org/interaction?accordingTo=inaturalist&field=study_url&includeObservations=true&limit=10&skip=0\" | jq .\r\n{\r\n  \"columns\": [\r\n    \"study_url\"\r\n  ],\r\n  \"data\": [\r\n    [\r\n      \"https://www.inaturalist.org/observations/78775212\"\r\n    ],\r\n    [\r\n      \"https://www.inaturalist.org/observations/78775212\"\r\n    ],\r\n    [\r\n      \"https://www.inaturalist.org/observations/78756420\"\r\n    ],\r\n    [\r\n      \"https://www.inaturalist.org/observations/78756420\"\r\n    ],\r\n    [\r\n      \"https://www.inaturalist.org/observations/78118778\"\r\n    ],\r\n    [\r\n      \"https://www.inaturalist.org/observations/78118778\"\r\n    ],\r\n    [\r\n      \"https://www.inaturalist.org/observations/78747562\"\r\n    ],\r\n    [\r\n      \"https://www.inaturalist.org/observations/78747562\"\r\n    ],\r\n    [\r\n      \"https://www.inaturalist.org/observations/78775210\"\r\n    ],\r\n    [\r\n      \"https://www.inaturalist.org/observations/78775210\"\r\n    ]\r\n  ]\r\n}\r\n```\r\n\r\nApologies for the inconvenience: I added some unit test to document this behavior in hopes of not having to repeat this again. \r\n\r\nAlso, please drop me a line if you are interested in exploring the idea for iNaturalist to link to observations beyond those that have native biotic association/interaction annotations in iNaturalist. This way, you can see how other datasets link _into_ iNaturalist observations to describe interactions. ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/849802501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/849809740","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/668#issuecomment-849809740","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/668","id":849809740,"node_id":"MDEyOklzc3VlQ29tbWVudDg0OTgwOTc0MA==","user":{"login":"kueda","id":22691,"node_id":"MDQ6VXNlcjIyNjkx","avatar_url":"https://avatars.githubusercontent.com/u/22691?v=4","gravatar_id":"","url":"https://api.github.com/users/kueda","html_url":"https://github.com/kueda","followers_url":"https://api.github.com/users/kueda/followers","following_url":"https://api.github.com/users/kueda/following{/other_user}","gists_url":"https://api.github.com/users/kueda/gists{/gist_id}","starred_url":"https://api.github.com/users/kueda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kueda/subscriptions","organizations_url":"https://api.github.com/users/kueda/orgs","repos_url":"https://api.github.com/users/kueda/repos","events_url":"https://api.github.com/users/kueda/events{/privacy}","received_events_url":"https://api.github.com/users/kueda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-27T17:27:41Z","updated_at":"2021-05-27T17:27:41Z","body":"> Also, please drop me a line if you are interested in exploring the idea for iNaturalist to link to observations beyond those that have native biotic association/interaction annotations in iNaturalist.\r\n\r\nUnfortunately at this point I feel all my development time goes toward mitigating the consequences of past mistakes. The only features I'll ever work on will probably be ones that take less than a few hours, and that doesn't sound like one of those.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/849809740/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/849811445","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/668#issuecomment-849811445","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/668","id":849811445,"node_id":"MDEyOklzc3VlQ29tbWVudDg0OTgxMTQ0NQ==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-27T17:30:29Z","updated_at":"2021-05-27T17:30:29Z","body":"@kueda I can see how maintaining inaturalist is quite a task, especially with increased use, volume, and exposure. \r\n\r\nPerhaps easier would be to include indirect links on my end as part of some \"smart\" query. \r\n\r\nThanks for taking the time to respond.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/849811445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]