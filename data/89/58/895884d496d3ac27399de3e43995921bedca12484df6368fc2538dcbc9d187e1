{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/898","repository_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions","labels_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/898/labels{/name}","comments_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/898/comments","events_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/898/events","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/898","id":1697827721,"node_id":"I_kwDOACXQt85lMsuJ","number":898,"title":"Build mechanism to sync from Wikidata to GloBI","user":{"login":"Daniel-Mietchen","id":465923,"node_id":"MDQ6VXNlcjQ2NTkyMw==","avatar_url":"https://avatars.githubusercontent.com/u/465923?v=4","gravatar_id":"","url":"https://api.github.com/users/Daniel-Mietchen","html_url":"https://github.com/Daniel-Mietchen","followers_url":"https://api.github.com/users/Daniel-Mietchen/followers","following_url":"https://api.github.com/users/Daniel-Mietchen/following{/other_user}","gists_url":"https://api.github.com/users/Daniel-Mietchen/gists{/gist_id}","starred_url":"https://api.github.com/users/Daniel-Mietchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Daniel-Mietchen/subscriptions","organizations_url":"https://api.github.com/users/Daniel-Mietchen/orgs","repos_url":"https://api.github.com/users/Daniel-Mietchen/repos","events_url":"https://api.github.com/users/Daniel-Mietchen/events{/privacy}","received_events_url":"https://api.github.com/users/Daniel-Mietchen/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":104818864,"node_id":"MDU6TGFiZWwxMDQ4MTg4NjQ=","url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/labels/new%20feature","name":"new feature","color":"009800","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-05-05T15:43:14Z","updated_at":"2023-10-23T21:49:08Z","closed_at":null,"author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"There are some taxa for which GloBI has no content but Wikidata/ Scholia have \"bibliographically co-occurring\" taxa, a subset of which would qualify for the kinds of interactions that GloBI is tracking.\r\nA current example is [Pasteuria penetrans (Q62875593)](https://scholia.toolforge.org/taxon/Q62875593#co-occurring-taxa).\r\n\r\nThe underlying Wikidata query is [as follows](https://query.wikidata.org/#%23%20tool%3A%20scholia%0A%23title%3A%20Taxa%20that%20co-occur%20with%20the%20target%20taxon%20in%20the%20literature%0APREFIX%20target%3A%20%3Chttp%3A%2F%2Fwww.wikidata.org%2Fentity%2FQ62875593%3E%0A%0ASELECT%20%3Fcount%20(CONCAT(%22%2Ftopics%2F%22%2CSUBSTR(STR(target%3A)%2C%2032)%2C%20%22%2C%22%2C%20SUBSTR(STR(%3Ftaxon)%2C%2032))%20AS%20%3FcountUrl)%0A%20%20%20%20%20%20%20%3Ftaxon%20%3FtaxonLabel%20(CONCAT(%22%2Ftaxon%2F%22%2C%20SUBSTR(STR(%3Ftaxon)%2C%2032))%20AS%20%3FtaxonUrl)%0A%20%20%20%20%20%20%20%3Fexample_work%20%3Fexample_workLabel%20(CONCAT(%22%2Fwork%2F%22%2C%20SUBSTR(STR(%3Fexample_work)%2C%2032))%20AS%20%3Fexample_workUrl)%0AWITH%20%7B%0A%20%20SELECT%20(COUNT(%3Fwork)%20AS%20%3Fcount)%20%3Ftaxon%20(SAMPLE(%3Fwork)%20AS%20%3Fexample_work)%20WHERE%20%7B%0A%20%20%20%20%23%20Find%20works%20for%20the%20specific%20queried%20topic%0A%09%3Fwork%20wdt%3AP921%20target%3A%20.%0A%20%20%20%20%0A%20%20%20%20%23%20Find%20co-occuring%20topics%0A%20%20%20%20%3Fwork%20wdt%3AP921%20%3Ftaxon%20.%0A%20%20%20%20%0A%20%20%20%20%23%20Filter%20for%20taxa%0A%20%20%20%20%3Ftaxon%20wdt%3AP105%20%3Ftaxonrank%20.%0A%20%20%20%20%0A%20%20%20%20%23%20Avoid%20listing%20the%20queried%20topic%20itself%0A%20%20%20%20FILTER%20(target%3A%20!%3D%20%3Ftaxon)%0A%20%20%7D%0A%20%20GROUP%20BY%20%3Ftaxon%0A%7D%20AS%20%25result%0AWHERE%20%7B%0A%20%20%23%20Label%20the%20results%0A%20%20INCLUDE%20%25result%0A%20%20SERVICE%20wikibase%3Alabel%20%7B%20bd%3AserviceParam%20wikibase%3Alanguage%20%22%5BAUTO_LANGUAGE%5D%2Cen%22%20.%20%7D%20%0A%7D%0AORDER%20BY%20DESC(%3Fcount)%0ALIMIT%20200%0A):\r\n\r\n```SPARQL\r\n#title: Taxa that co-occur with the target taxon in the literature\r\nPREFIX target: <http://www.wikidata.org/entity/Q62875593>\r\n\r\nSELECT ?count (CONCAT(\"/topics/\",SUBSTR(STR(target:), 32), \",\", SUBSTR(STR(?taxon), 32)) AS ?countUrl)\r\n       ?taxon ?taxonLabel (CONCAT(\"/taxon/\", SUBSTR(STR(?taxon), 32)) AS ?taxonUrl)\r\n       ?example_work ?example_workLabel (CONCAT(\"/work/\", SUBSTR(STR(?example_work), 32)) AS ?example_workUrl)\r\nWITH {\r\n  SELECT (COUNT(?work) AS ?count) ?taxon (SAMPLE(?work) AS ?example_work) WHERE {\r\n    # Find works for the specific queried topic\r\n\t?work wdt:P921 target: .\r\n    \r\n    # Find co-occuring topics\r\n    ?work wdt:P921 ?taxon .\r\n    \r\n    # Filter for taxa\r\n    ?taxon wdt:P105 ?taxonrank .\r\n    \r\n    # Avoid listing the queried topic itself\r\n    FILTER (target: != ?taxon)\r\n  }\r\n  GROUP BY ?taxon\r\n} AS %result\r\nWHERE {\r\n  # Label the results\r\n  INCLUDE %result\r\n  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\" . } \r\n}\r\nORDER BY DESC(?count)\r\nLIMIT 200\r\n\r\n\r\n```\r\n\r\nThe generic version of the query sits at https://github.com/WDscholia/scholia/blob/master/scholia/app/templates/taxon_co-occurring-taxa.sparql .\r\n\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/898/timeline","performed_via_github_app":null,"state_reason":null}