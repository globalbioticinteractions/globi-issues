[{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/434393632","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/378#issuecomment-434393632","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/378","id":434393632,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDM5MzYzMg==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-30T17:22:20Z","updated_at":"2018-10-30T17:22:20Z","body":"Hi @PierreOcean - Thanks for taking the time to share the importance of life stages in species interactions. \r\n\r\nI agree that life stage information is important to maintain. This is why GloBI has considered life stages from the beginning and included in the method paper at https://doi.org/10.1016/j.ecoinf.2014.08.005 . However, there's always improvements to be made. \r\n\r\nHere's the status quo: First, the life stage information is not currently exposed in the various web tools, but the information is available via various data products and the api. Second, GloBI currently has various ways to detect/include life stages from data source: by extracting from a name (e.g., Gadus morhua eggs) using https://github.com/jhpoelen/eol-globi-data/blob/master/eol-globi-taxon-resolver/src/main/resources/org/eol/globi/taxon/life-stage-mapping.csv or including an already parsed out field from an existing source datasets (e.g., juv/adult of designations from Fishbase/Sealifebase ).  Also, in the template dataset at https://github.com/globalbioticinteractions/template-dataset and https://github.com/globalbioticinteractions/template-dataset/blob/master/interactions.tsv you'll find that two columns are dedicated to life stage: sourceLifeStageId and sourceLifeStageName . \r\n\r\nActions I took just now:\r\n\r\n1. opened an issue #379 describing a desire to include life stage history in the various web UI tools that help explore interactions. I hope we can use this issue to share ideas on how to expose the life stage information in our basic web UI discovery tools. \r\n2. Looked at your example of sprat eating cod and confirmed that the life stage history is available via the data download and various data archives (e.g., the tsv archive at https://globalbioticinteractions.org/data ). See https://www.globalbioticinteractions.org/?interactionType=eatenBy&sourceTaxon=Gadus%20morhua&targetTaxon=Sprattus%20sprattus and associated data download via https://api.globalbioticinteractions.org/interaction.csv?type=csv&limit=4096&interactionType=eatenBy&sourceTaxon=Gadus%20morhua&targetTaxon=Sprattus%20sprattus&includeObservations=true&field=source_taxon_id&field=source_taxon_name&field=source_taxon_path&field=source_taxon_path_ids&field=source_specimen_life_stage_id&field=source_specimen_life_stage&field=source_specimen_physiological_state_id&field=source_specimen_physiological_state&field=source_specimen_body_part_id&field=source_specimen_body_part&field=interaction_type&field=target_taxon_id&field=target_taxon_name&field=target_taxon_path&field=target_taxon_path_ids&field=target_specimen_life_stage_id&field=target_specimen_physiological_state&field=target_specimen_physiological_state_id&field=target_specimen_physiological_state&field=target_specimen_body_part_id&field=target_specimen_body_part&field=latitude&field=longitude&field=study_citation&field=study_url&field=study_source_citation . For convenience, I've attached a copy to this issue.\r\n[lifestageSpratCod.csv.txt](https://github.com/jhpoelen/eol-globi-data/files/2530782/lifestageSpratCod.csv.txt)\r\n3. Poked around a bit in the DAPSTOM dataset and found that the life stage extraction from descriptions like  ```CALANUS SPP (NAUPLII)``` was not successful due to some limitations of the life stage term matcher. I was able to reproduce this issue in a test and I've made some improvements like making the term matcher ignore case (e.g., Nauplii is the same as nauplii or NAUPLII), and remove non-letter characters like parenthesis. These changes should propagate within a couple of days.  Also see https://github.com/jhpoelen/eol-globi-data/commit/362fbb77743a2fcdf362aa6045ba8f35b4df9f3d#diff-86c655b41058c0607ce2eeb0f3d49909R379 . \r\n\r\nThanks again for your feedback and I am curious to hear your take on my responses. Also, if you have more specific examples of wrong links, please do share. In addition, please let me know if you have any suggestions on how to organize expert reviews of GloBI data. \r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/434393632/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/434617970","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/378#issuecomment-434617970","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/378","id":434617970,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDYxNzk3MA==","user":{"login":"PierreENOlivier","id":10992175,"node_id":"MDQ6VXNlcjEwOTkyMTc1","avatar_url":"https://avatars.githubusercontent.com/u/10992175?v=4","gravatar_id":"","url":"https://api.github.com/users/PierreENOlivier","html_url":"https://github.com/PierreENOlivier","followers_url":"https://api.github.com/users/PierreENOlivier/followers","following_url":"https://api.github.com/users/PierreENOlivier/following{/other_user}","gists_url":"https://api.github.com/users/PierreENOlivier/gists{/gist_id}","starred_url":"https://api.github.com/users/PierreENOlivier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PierreENOlivier/subscriptions","organizations_url":"https://api.github.com/users/PierreENOlivier/orgs","repos_url":"https://api.github.com/users/PierreENOlivier/repos","events_url":"https://api.github.com/users/PierreENOlivier/events{/privacy}","received_events_url":"https://api.github.com/users/PierreENOlivier/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-31T09:27:49Z","updated_at":"2018-10-31T09:27:49Z","body":"Hi @jhpoelen, thanks for the detailed reply. I am editing this reply as I am writing it. I have tested a few things and it seems the info is not properly retrieved from the database.\r\n\r\nHow do you access the life stage info? I usually access globi via the rglobi package (seemed easier to me for extracting data) but I don't remind any arguments for selecting or accessing life stages except the \"showfield\" which I leave to its default when accessing the data.\r\n\r\nI just tried a simple _get_interactions_by_taxa(\"Gadus morhua\")_ right now and I see the lifestage columns, however they only contains NA when I am sure the data coming from DAPSTOM or the Year of the Stomach campaign from ICES should contain life stage info.\r\nAlso, is it normal that it doesn't retrieve the citation along with the links? The columns \"study_citation\" and \"study_source_citation\" are completely empty.\r\n\r\nChecking the link you retrieved, I realized that you used the \"PreyedUponBy\" when I probably used \"PreysOn\" or \"Eats\" when I retrieved data months ago. **Could it be that the info are not symmetrical?**\r\nSprat Eats/PreysOn Cod should retrieve the same info as Cod PreyedUponBy/EatenBy Sprat.\r\n\r\nI also just realized the link you got **\"Cod preyed upon by Sprat\" is not even retrieved now with a get_interactions_by_taxa(\"Gadus morhua\")**. This is really odd!\r\n\r\n![screenshot 2018-10-31 11 21 28](https://user-images.githubusercontent.com/10992175/47778305-46f48000-dcff-11e8-9bfc-0cd380e773a4.png)\r\n![screenshot 2018-10-31 11 21 40](https://user-images.githubusercontent.com/10992175/47778312-48be4380-dcff-11e8-895c-4820662fded8.png)\r\n\r\nI am not sure what I do wrong or what goes wrong but something is not properly functioning.\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/434617970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/434711749","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/378#issuecomment-434711749","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/378","id":434711749,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDcxMTc0OQ==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-31T14:38:01Z","updated_at":"2018-10-31T14:38:01Z","body":"Hey @PierreOcean thanks for your specific examples. These examples help me reproduce what you are seeing and (hopefully) figure out what is going on. \r\n\r\nYou noticed that the lifestage and citation info are always NA  when using _get_interactions_by_taxa(\"Gadus morhua\")_ . This is because rglobi returns taxon level interactions by default. Because the interactions are grouped by taxa, record level attributes like life stage and citations are not included. However, if you'd like to do record/observation level queries, include returnobservations=T in your request:\r\n\r\n```R\r\nget_interactions_by_taxa(\"Gadus morhua\", returnobservations=T)\r\n```\r\nYou noticed that _Sprattus sprattus_ does not appear when using _get_interactions_by_taxa(\"Gadus morhua\"). This is likely because rglobi only returns the first 1024 rows by default and because _Gadus morhua_ is a well studied commercial fish (many of us like to eat our Atlantic cod!), many interactions have been recorded. To include more records, you can say:\r\n\r\n```R\r\nget_interactions_by_taxa(\"Gadus morhua\", otherkeys = list(limit = 4096))\r\n```\r\n\r\nNow, by narrowing down our query to reflect the use case of sprats eating cod eggs:\r\n\r\n```R\r\nget_interactions_by_taxa(\"Gadus morhua\", targettaxon=\"Sprattus sprattus\", includeobservations=T, interactiontype=\"eatenBy\", otherkeys = list(limit = 4096))\r\n```\r\nwhich, in my r console produced the result\r\n\r\n source_taxon_external_id | source_taxon_name | source_taxon_path | source_specimen_life_stage | interaction_type | target_taxon_external_id | target_taxon_name | target_taxon_path | target_specimen_life_stage | latitude | longitude | study_citation | study_source_citation \r\n --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | ---\r\nEOL:206692 | Gadus morhua | Animalia \\| Chordata \\| Actinopterygii \\| Gadiformes \\| Gadidae \\| Gadus \\| Gadus morhua | eggs |  preyedUponBy  | EOL:607993 | Sprattus sprattus | Animalia \\| Chordata \\| Actinopterygii \\| Clupeiformes \\| Clupeidae \\| Sprattus \\| Sprattus sprattus | juv./adults |  NA | NA |  Koester, F.W. 1992. Predation by herring and sprat on cod eggs and larvae in the Bornholm Basin - preliminary results. ICES C.M./J:41. | Froese, R. and D. Pauly. Editors. 2016. FishBase. World Wide Web electronic publication. www.fishbase.org, version (10/2016). Accessed at <https://github.com/globalbioticinteractions/fishbase/archive/7e67537c10ab6def64e0e7aa7953af28f6198d2a.zip> on 24 Oct 2018.\r\n\r\nPlease let me know whether this addresses your concerns.\r\n                                                                                                                                                                                                                                              \r\nAlso, I realize that there's definitely room for improvement on how to better explore existing species interaction datasets. I'd be curious to know whether you have any suggestions on how to make rglobi or GloBI's web tools a little better. Pull requests are definitely considered! rglobi lives at https://github.com/ropensci/rglobi and the web tools are embedded in https://github.com/globalbioticinteractions/globalbioticinteractions.github.io . \r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/434711749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/434716324","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/378#issuecomment-434716324","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/378","id":434716324,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDcxNjMyNA==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-31T14:49:27Z","updated_at":"2018-10-31T14:49:27Z","body":"Re: ICES stomach dataset. I reviewed the dataset and did not find any life stage information. Can you please point me to a data source that includes the life stage info? Are you referring to predator age? \r\n\r\nHere's some lines for the beginning of the ICES dataset - \r\n\r\n\r\nFile Name | Latitude | Longitude | Estimated Lat/Lon | Date/Time | Year | Quarter | Month | Day | Time | Station/Haul | Sample Number | ICES StomachID | Depth | Temperature | Country | Ship | ICES Rectangle | Sampling Method | Predator | Predator NODC Code | Predator (mean) Lengh | Predator (mean) Weight | Predator (mean) Age | Predator Lower Length Bound | Predator Upper Length Bound | CPUE | Number Stomachs With Food | Number Stomachs Regurgitated | Number Stomachs With Skeletal Remains | Number Stomachs Empty | Number Stomachs | Digestion Stage | Prey Species Name | Prey NODC Code | Prey Weight | Prey Lower Length Bound | Prey Upper Length Bound | Prey Number | ICES Internal ID\r\n-- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | --\r\nExccoddatsto_815 | 55.25 | 8.5 | Yes | 01/01/1981 00:00:00 | 1981 | 1 | 1 | 1 |   |   | 26 | 26 |   |   |   |   | 39F8 | Demersal sampling | Gadus morhua | 8791030402 | 125 |   |   | 100 | 150 | 29 | 26 | 0 | 0 | 2 | 28 |   | Polychaeta | 5001000000 | 1.5 |   |   | 5 | 1\r\nExccoddatsto_815 | 55.25 | 8.5 | Yes | 01/01/1981 00:00:00 | 1981 | 1 | 1 | 1 |   |   | 26 | 26 |   |   |   |   | 39F8 | Demersal sampling | Gadus morhua | 8791030402 | 125 |   |   | 100 | 150 | 29 | 26 | 0 | 0 | 2 | 28 |   | Nereis | 5001240400 | 5.3 |   |   | 1 | 2\r\n\r\n ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/434716324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/436568213","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/378#issuecomment-436568213","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/378","id":436568213,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNjU2ODIxMw==","user":{"login":"PierreENOlivier","id":10992175,"node_id":"MDQ6VXNlcjEwOTkyMTc1","avatar_url":"https://avatars.githubusercontent.com/u/10992175?v=4","gravatar_id":"","url":"https://api.github.com/users/PierreENOlivier","html_url":"https://github.com/PierreENOlivier","followers_url":"https://api.github.com/users/PierreENOlivier/followers","following_url":"https://api.github.com/users/PierreENOlivier/following{/other_user}","gists_url":"https://api.github.com/users/PierreENOlivier/gists{/gist_id}","starred_url":"https://api.github.com/users/PierreENOlivier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PierreENOlivier/subscriptions","organizations_url":"https://api.github.com/users/PierreENOlivier/orgs","repos_url":"https://api.github.com/users/PierreENOlivier/repos","events_url":"https://api.github.com/users/PierreENOlivier/events{/privacy}","received_events_url":"https://api.github.com/users/PierreENOlivier/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-07T09:54:47Z","updated_at":"2018-11-07T15:14:49Z","body":"Hi @jhpoelen \r\nI checked our code. We were not returning all observations and did not increase the rows limit.\r\nI think it is a bit counter intuitive to not return the life stages when returning single interactions.\r\nThere should be an intermediate step/case to what exists now.\r\n\r\nWe currently can retrieve:\r\n\r\n1. returnObservations = F\r\nA eats B... ref1 (no duplicates, the diet of individuals is eliminated)\r\nwhich retrieves a limited amount of data, basically one reference per row.\r\n\r\n2. returnObservations = T\r\nA1 of lifestage X eats B1 of lifestage Y... ref1 (duplicates of interactions, one row per individuals, 1 is the identifier of the individual)\r\nwhich requires retrieving a huge chunk of data\r\n\r\nThere should be an intermediate case where life stages are not considered as duplicates:\r\nA1 lifestage==NA eats B1 lifestage ==NA... ref1\r\nA2 adult eats B2 NA...ref1\r\nA3 juvenile eats B3 larvae...ref1\r\n... etc\r\nHowever you would only retrieve such interactions once so instead of retrieving 1 observation or thousands, you would retrieve at most 25 from each reference (if you consider every possible interactions between NA, adult, juvenile, larvae, eggs). That way you make sure to get all the information you need in the least amount of effort.\r\n\r\nTo me, it seems the fastest and easiest way to implement.\r\nOur food web could contain 500 species so if we have to retrieve every single observations and deal with those, it takes edge (if our servers allows it) when we do not need to retrieve the 4,000 interactions for Cod eats Herring.\r\n\r\n\r\nP.S. I am not sure how the pull request tool works and I do not want to mess around with the GitHub repository.\r\n\r\nEDIT:\r\nThere would be some work to do on the consistency people reports life stages. This is what I get from R:\r\n NA       \"-999\"                   \"post-juvenile adult stage\" \"juv./adults\"               \"\"                          \"recruits/juv.\"            \r\n\"adults\"                    \"larvae\"                    \"n.a./others\"               \"eggs\"\r\n\r\nPart of the info is not recognized as missing data, part is redundant (and I just found plenty more ways to call the life stages in the dataset).","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/436568213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/439984659","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/378#issuecomment-439984659","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/378","id":439984659,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTk4NDY1OQ==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-19T17:57:04Z","updated_at":"2018-11-19T17:57:04Z","body":"@PierreOcean Just wanted to let you know that I did not forget about the topic around lifestages in GloBI and the datasets is help to provide access to. In fact, a similar data access issues came up in similar discussions (see https://github.com/ropensci/rglobi/issues/29 ). I'd be curious to hear your thoughts on that discussion. Thanks for being patient as I am trying to figure out how to parse and address the important issues that you shared.\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/439984659/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/445420127","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/378#issuecomment-445420127","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/378","id":445420127,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NTQyMDEyNw==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-08T01:52:40Z","updated_at":"2018-12-08T01:52:40Z","body":"@PierreOcean thanks for being patient. I had a brief look at the lifestage values as retrieved from existing datasets via GloBI. I did the following:\r\n\r\n1. download all the aggregated data via ```curl -L https://depot.globalbioticinteractions.org/snapshot/target/data/tsv/interactions.tsv.gz > interactions.tsv.gz``` \r\n2. combine the source/target life stage ids/terms using \r\n```\r\nzcat interactions.tsv.gz | cut -f27,28 | tail -n+2 > lifestages.tsv\r\nzcat interactions.tsv.gz | cut -f61,62 | tail -n+2 >> lifestages.tsv\r\n```\r\n3. make a list of all unique lifestage id/name pairs and counted 1524 unique id/name pairs\r\n```\r\ncat lifestages.tsv | sort | uniq > lifestages_unique.tsv\r\ncat lifestages_unique.tsv | wc -l\r\n``` \r\n4. check for the nauplii lifestages and found a typo ```naupliii``` along with the uberon term at (see also https://www.ebi.ac.uk/ols/ontologies/uberon/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2FUBERON_0014406) one:\r\n```console\r\n$ cat lifestages.tsv | sort | uniq | grep \"naupli\"\r\nno:match\tnaupliii\r\nUBERON:0014406\tnauplius stage\r\n```\r\n5. found that that 1089329 out of 6907704 (~1 out of 7) source/target had life stages defined:\r\n```\r\n$cat lifestages.tsv | grep -v -P \"\\t$\" | wc -l\r\n1089329\r\n$ cat lifestages.tsv | wc -l\r\n6907704\r\n```\r\n\r\nHopefully, with this, I've shown that (a) life stages are available via easy to parse csv/tsv archives at https://globalbioticinteractions.org/data  (b) life stages names vary widely in quality, consistency if they are defined at all (similar to taxonomic names) and (c) relatively few, only about 1500, unique life stage id/name pairs exist . \r\n\r\nIdeally, we'd have to opportunity to either contact the original datasource owner and help standardize terms, or map existing terms into more consistent ones using entries in\r\nhttps://github.com/jhpoelen/eol-globi-data/blob/master/eol-globi-taxon-resolver/src/main/resources/org/eol/globi/taxon/life-stage-mapping.csv\r\n\r\n@PierreOcean curious to hear your thoughts on all this, especially on how you'd like to engage the data set owners or other experts (such as yourself?) to help make the life stage terms a little more consistent.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/445420127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/478777097","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/378#issuecomment-478777097","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/378","id":478777097,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3ODc3NzA5Nw==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-01T22:58:49Z","updated_at":"2019-04-01T22:58:49Z","body":"@PierreOcean Thanks again for your feedback. To summarize, your feedback concerned the importance of including lifestages of organisms when making species interaction claims. I very much agree and I hope that my detailed examples shows that GloBI does take the life-stage information into account when provided by the originating dataset. Resource and time permitting, I hope that life-stages will get a more prominent role in the basic exploratory web UIs that GloBI provides. Meanwhile, I hope that the life-stage information included in the data products available through https://globalbioticinteractions.org/data will suffice. If you feel that life-stage information available in source datasets are not properly indexed by GloBI, please open a separate issue  detailing the datasets and the expected and actual outcomes. Needless to say, please do holler if there's other concerns / ideas your have.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/478777097/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]