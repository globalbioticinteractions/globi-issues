[{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1868111455","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/921#issuecomment-1868111455","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/921","id":1868111455,"node_id":"IC_kwDOACXQt85vWR5f","user":{"login":"seltmann","id":1044474,"node_id":"MDQ6VXNlcjEwNDQ0NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1044474?v=4","gravatar_id":"","url":"https://api.github.com/users/seltmann","html_url":"https://github.com/seltmann","followers_url":"https://api.github.com/users/seltmann/followers","following_url":"https://api.github.com/users/seltmann/following{/other_user}","gists_url":"https://api.github.com/users/seltmann/gists{/gist_id}","starred_url":"https://api.github.com/users/seltmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seltmann/subscriptions","organizations_url":"https://api.github.com/users/seltmann/orgs","repos_url":"https://api.github.com/users/seltmann/repos","events_url":"https://api.github.com/users/seltmann/events{/privacy}","received_events_url":"https://api.github.com/users/seltmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T22:39:04Z","updated_at":"2023-12-22T22:39:04Z","body":"I may have a related issue in mis aligned columns in the interactions.tsv from the data page/snapshot version. The dataset was downloaded ca. December 18th.\r\n\r\nThen created a spreadsheet from the head -5000 > file.txt. Then imported the file.txt into an excel spreadsheet using tab-delimated/utf-8 import. \r\n\r\n[example-bees-plants-GloBI.xlsx.txt](https://github.com/globalbioticinteractions/globalbioticinteractions/files/13757138/example-bees-plants-GloBI.xlsx.txt)\r\n\r\n[example-bees-plants-GloBI.tsv.txt](https://github.com/globalbioticinteractions/globalbioticinteractions/files/13757142/example-bees-plants-GloBI.tsv.txt)\r\n\r\n\r\nI used this script to create a subset of full dataset. I ran shell script from command line, using tools grep, cut, uniq, sort. The script is here: https://github.com/Big-Bee-Network/global-bee-interaction-data/blob/main/bee_data_BID.sh\r\n\r\n![Screen Shot 2023-12-22 at 2 24 11 PM](https://github.com/globalbioticinteractions/globalbioticinteractions/assets/1044474/aee249a0-962f-4f17-a449-b46b0649e0ba)\r\n\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1868111455/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1868120185","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/921#issuecomment-1868120185","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/921","id":1868120185,"node_id":"IC_kwDOACXQt85vWUB5","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T23:03:39Z","updated_at":"2023-12-22T23:27:46Z","body":"@seltmann thanks for sharing your notes. Taking notes myself as I am trying to reproduce your results.\r\n\r\n```\r\ncurl https://depot.globalbioticinteractions.org/snapshot/target/data/tsv/interactions.tsv.gz > interactions.tsv.gz\r\nzcat interactions.tsv.gz | mlr --tsvlite cat | pv -l > /dev/null\r\n```\r\nyielded no errors, in counting of  all lines in about 5 minutes.\r\n\r\n```\r\n13.6M 0:05:18 [42.6k/s]\r\n```\r\n\r\nwith \r\n\r\n```\r\n$ cat interactions.tsv.gz | sha256sum\r\n8994c640017de047bd1a25f93b95497bafece642386884afebb10ee28814db80  -\r\n```\r\n\r\nissue reported contains \"phylum\" in second columns.\r\n\r\nbut \r\n\r\n```\r\nzcat interactions.tsv.gz | cut -f2 | grep phylum | wc -l\r\n```\r\n\r\nyield : 0 matching lines, which suggests that the issue is not currently present in the snapshot source data. \r\n\r\nNow, trying to reproduce by reproducing the results using analysis scripts provided.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1868120185/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1868151520","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/921#issuecomment-1868151520","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/921","id":1868151520,"node_id":"IC_kwDOACXQt85vWbrg","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-23T00:35:02Z","updated_at":"2023-12-23T00:35:02Z","body":"I tried to produce your results using the script as documented in https://github.com/Big-Bee-Network/global-bee-interaction-data/pull/7 .\r\n\r\nAnd. . . unfortunately, I am not seeing the data corruption you are seeing. Can you try and re-run the script (as I used it see pull request)? \r\n\r\nI've included the results of \r\n\r\n```\r\ncat indexed_interactions_bees.tsv\\\r\n | head -n5000\\\r\n > indexed_interactions_bees_first_5000.tsv.txt\r\n```\r\n\r\n[indexed_interactions_bees_first_5000.tsv.txt](https://github.com/globalbioticinteractions/globalbioticinteractions/files/13757422/indexed_interactions_bees_first_5000.tsv.txt)\r\n\r\nI am not seeing any malformed columns / rows. Can you please confirm by re-running your script on \"freshly\" downloaded data. \r\n\r\nPotential root causes for what you are seeing may be: 1. running two scripts at once, causing multiple script to write into one file 2. corrupted interactions.tsv due to size (it is a big! file when uncompressed). \r\n\r\nItem 2. would be covered by streaming from the original data as I suggested in the updated script. \r\n\r\nCurious to see whether re-running the script solves the problem. ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1868151520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1868158064","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/921#issuecomment-1868158064","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/921","id":1868158064,"node_id":"IC_kwDOACXQt85vWdRw","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-23T01:01:08Z","updated_at":"2023-12-23T01:01:50Z","body":"Also, I was unable to reproduce the original reported issue\r\n\r\n```\r\ncurl --silent https://depot.globalbioticinteractions.org/snapshot/target/data/tsv/interactions.tsv.gz\\\r\n | gunzip\\\r\n | mlr --tsvlite cut -f sourceTaxonName,interactionTypeName,targetTaxonName\\\r\n | pv -l\\\r\n > /dev/null\r\n```\r\n\r\nyielded,\r\n\r\n```\r\n13.6M 0:05:03 [44.8k/s]\r\n```\r\nwith no mlr errors were reported. \r\n\r\nThis suggests that the issue no longer occurs.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1868158064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1879346003","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/921#issuecomment-1879346003","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/921","id":1879346003,"node_id":"IC_kwDOACXQt85wBItT","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-05T22:43:11Z","updated_at":"2024-01-05T22:43:11Z","body":"@seltmann please review the outcome of the suspiciously formatted interactions.tsv - re-opening","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1879346003/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1937098160","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/921#issuecomment-1937098160","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/921","id":1937098160,"node_id":"IC_kwDOACXQt85zdcWw","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-10T19:07:56Z","updated_at":"2024-02-10T19:07:56Z","body":"closing stale issue.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1937098160/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]