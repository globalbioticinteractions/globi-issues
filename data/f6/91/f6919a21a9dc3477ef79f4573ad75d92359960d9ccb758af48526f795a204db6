[{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1128240268","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/792#issuecomment-1128240268","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/792","id":1128240268,"node_id":"IC_kwDOACXQt85DP5SM","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-16T23:34:41Z","updated_at":"2022-05-16T23:34:41Z","body":"This issue happens when clicking on \"download sample csv\" from the GloBI website at https://globalbioticinteractions.org .","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1128240268/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1128796175","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/792#issuecomment-1128796175","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/792","id":1128796175,"node_id":"IC_kwDOACXQt85DSBAP","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-17T12:16:23Z","updated_at":"2022-05-17T12:16:23Z","body":"Root cause was the introduction of source/target sex_id properties. It appears that these fields are not yet populated, and neo4j tries to append the property to its schema when first requested. \r\n\r\nreproduced using:\r\n\r\n```\r\n$ cypher-shell\r\nneo4j> CYPHER 2.3 START sourceTaxon = node:taxonPaths('path:\\\"Enhydra lutris\\\"') MATCH sourceTaxon<-[:CLASSIFIED_AS]-sourceSpecimen RETURN sourceSpecimen.sexId as source_specimen_sex_id;\r\nNo write operations are allowed on this database. This is a read only Neo4j instance.\r\n```\r\n\r\nFor now, the issue was fixed by explicitly returning null when sex_id properties are requested:\r\n\r\n```\r\n$ curl \"https://api.globalbioticinteractions.org/interaction.csv?type=csv&interactionType=eats&limit=1&offset=0&refutes=false&includeObservations=true&sourceTaxon=Enhydra%20lutris&field=source_taxon_id&field=source_taxon_name&field=source_taxon_path&field=source_taxon_path_ids&field=source_specimen_occurrence_id&field=source_specimen_institution_code&field=source_specimen_collection_code&field=source_specimen_catalog_number&field=source_specimen_life_stage_id&field=source_specimen_life_stage&field=source_specimen_physiological_state_id&field=source_specimen_physiological_state&field=source_specimen_body_part_id&field=source_specimen_body_part&field=source_specimen_sex_id&field=source_specimen_sex&field=source_specimen_basis_of_record&field=interaction_type&field=target_taxon_id&field=target_taxon_name&field=target_taxon_path&field=target_taxon_path_ids&field=target_specimen_occurrence_id&field=target_specimen_institution_code&field=target_specimen_collection_code&field=target_specimen_catalog_number&field=target_specimen_life_stage_id&field=target_specimen_life_stage&field=target_specimen_physiological_state_id&field=target_specimen_physiological_state&field=target_specimen_body_part_id&field=target_specimen_body_part&field=target_specimen_sex_id&field=target_specimen_sex&field=target_specimen_basis_of_record&field=latitude&field=longitude&field=collection_time_in_unix_epoch&field=study_citation&field=study_url&field=study_source_citation&field=study_source_archive_uriq\"\r\n\"source_taxon_name\",\"source_taxon_path\",\"source_taxon_path_ids\",\"source_specimen_occurrence_id\",\"source_specimen_institution_code\",\"source_specimen_collection_code\",\"source_specimen_catalog_number\",\"source_specimen_life_stage_id\",\"source_specimen_life_stage\",\"source_specimen_physiological_state_id\",\"source_specimen_physiological_state\",\"source_specimen_body_part_id\",\"source_specimen_body_part\",\"source_specimen_sex_id\",\"source_specimen_sex\",\"source_specimen_basis_of_record\",\"interaction_type\",\"target_taxon_name\",\"target_taxon_path\",\"target_taxon_path_ids\",\"target_specimen_occurrence_id\",\"target_specimen_institution_code\",\"target_specimen_collection_code\",\"target_specimen_catalog_number\",\"target_specimen_life_stage_id\",\"target_specimen_life_stage\",\"target_specimen_physiological_state_id\",\"target_specimen_physiological_state\",\"target_specimen_body_part_id\",\"target_specimen_body_part\",\"target_specimen_sex_id\",\"target_specimen_sex\",\"target_specimen_basis_of_record\",\"latitude\",\"longitude\",\"event_date\",\"study_citation\",\"study_url\",\"study_source_citation\"\r\n\"Enhydra lutris\",\"Animalia | Chordata | Mammalia | Carnivora | Mustelidae | Enhydra | Enhydra lutris\",\"EOL:1 | EOL:694 | EOL:1642 | EOL:7662 | EOL:7670 | EOL_V2:34543 | EOL_V2:328583\",,,,,,,,,,,,,,\"eats\",\"Crustacea\",\"Animalia | Bilateria | Protostomia | Ecdysozoa | Arthropoda | Crustacea\",\"EOL:1 | EOL:3014411 | EOL:10459935 | EOL:8880788 | EOL:164 | EOL_V2:2598871\",,,,,,,,,,,,,,,,,\"Myers, P., R. Espinosa, C. S. Parr, T. Jones, G. S. Hammond, and T. A. Dewey. 2013. The Animal Diversity Web (online). Accessed at http://animaldiversity.org.\",,\"Semantic Prototypes in Research Ecoinformatics (SPIRE). Data provided by Joel Sachs. See also http://ebiquity.umbc.edu/get/a/publication/297.pdf .\"\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1128796175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]