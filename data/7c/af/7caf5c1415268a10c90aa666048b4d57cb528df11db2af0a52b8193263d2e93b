[{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1182538634","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/799#issuecomment-1182538634","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/799","id":1182538634,"node_id":"IC_kwDOACXQt85GfBuK","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-12T21:58:57Z","updated_at":"2022-07-12T22:00:25Z","body":"@H-Waters thanks for sharing your observations re: rglobi interactions. \r\n\r\nI was able to produce:\r\n\r\n```R\r\n> twoTaxa <- get_interactions_by_taxa(sourcetaxon = \"Ranunculus\", targettaxon = \"Malachius bipustulatus\", bbox=c(-180, 0, 180, 90 ))\r\n> nrow(twoTaxa)\r\n[1] 6\r\n```\r\nand\r\n\r\n```R\r\n> oneTaxa <- get_interactions_by_taxa(sourcetaxon = \"Ranunculus\",  bbox=c(-180, 0, 180, 90 ))\r\n> oneTaxaSubset <- oneTaxa[oneTaxa$target_taxon_name == \"Malachius bipustulatus\",]  \r\n> nrow(oneTaxaSubset)\r\n[1] 1\r\n```\r\n\r\nThe reason why you are getting the confusing results, is due to a paging artifact. \r\n\r\nrglobi is using the GloBI Web API, and Web APIs are usually configured to only return a limited amount of results at a time. \r\n\r\nIn this case, \r\n\r\n```R\r\n> nrow(get_interactions_by_taxa(sourcetaxon = \"Ranunculus\",  bbox=c(-180, 0, 180, 90 )))\r\n1024\r\n```\r\n\r\nindicating that the default maximum number of results (e.g., 1024) has been reached. So, yes, the second query is a wide query, but runs into a Web API limit, and appears to not include the additional 5 records reported for _Malachius bipustulatus_ . \r\n\r\nThis Web API limit is a bit of a bummer, and highlights that the Web API is really just there to discover data. If you'd like to work with all the data, I usually use the interactions.tsv.gz or interactions.csv.gz (see https://globalbioticinteractions.org/data) instead of working around the Web API constraints. \r\n\r\nIf you do want to continue using the rglobi (and therefore GloBI Web API) please have a look at the \"paging\" section in the rglobi vignette at https://cran.r-project.org/web/packages/rglobi/vignettes/rglobi_vignette.html . See also screenshot below.\r\n\r\n![Screenshot from 2022-07-12 16-56-20](https://user-images.githubusercontent.com/1084872/178602428-567ebbf2-b76e-4b7f-a7ee-535695520cf0.png)\r\n\r\nApologies for the inconvenience, I realize that pagination business is a bit of a bummer. \r\n\r\nAm open to suggestions on how to have your future self or your peers getting misled by confusing rglobi outputs due to pagination / web api constraints. \r\n\r\nIf this resolved your issue, please close this issue. Otherwise, I'd be happy to continue our conversation.\r\n\r\nthanks for your patience!\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1182538634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1183274762","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/799#issuecomment-1183274762","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/799","id":1183274762,"node_id":"IC_kwDOACXQt85Gh1cK","user":{"login":"H-Waters","id":45857086,"node_id":"MDQ6VXNlcjQ1ODU3MDg2","avatar_url":"https://avatars.githubusercontent.com/u/45857086?v=4","gravatar_id":"","url":"https://api.github.com/users/H-Waters","html_url":"https://github.com/H-Waters","followers_url":"https://api.github.com/users/H-Waters/followers","following_url":"https://api.github.com/users/H-Waters/following{/other_user}","gists_url":"https://api.github.com/users/H-Waters/gists{/gist_id}","starred_url":"https://api.github.com/users/H-Waters/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/H-Waters/subscriptions","organizations_url":"https://api.github.com/users/H-Waters/orgs","repos_url":"https://api.github.com/users/H-Waters/repos","events_url":"https://api.github.com/users/H-Waters/events{/privacy}","received_events_url":"https://api.github.com/users/H-Waters/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-13T14:09:08Z","updated_at":"2022-07-13T14:09:08Z","body":"Hi @jhpoelen! Thanks so much for taking time to reply to this, and in such detail.\r\n\r\nOf course, I had completely forgotten about the results limit. That clears things up! I'll close the issue.\r\n\r\nRe: suggestions - I don't know whether you or others would consider it valuable, but perhaps a warning message when a query you've performed has returned more results than the limit would be helpful? \r\n\r\nThanks again for your help!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1183274762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1183319819","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/799#issuecomment-1183319819","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/799","id":1183319819,"node_id":"IC_kwDOACXQt85GiAcL","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-13T14:47:34Z","updated_at":"2022-07-13T14:47:34Z","body":"@H-Waters thanks for your suggestion to log a warning message when the limit has been reached!\r\n\r\nI've created a separate issue for your suggestion at https://github.com/ropensci/rglobi/issues/44  . \r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1183319819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1184453335","html_url":"https://github.com/globalbioticinteractions/globalbioticinteractions/issues/799#issuecomment-1184453335","issue_url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/799","id":1184453335,"node_id":"IC_kwDOACXQt85GmVLX","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-14T13:31:17Z","updated_at":"2022-07-14T13:31:17Z","body":"see https://github.com/ropensci/rglobi/issues/44","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/globalbioticinteractions/issues/comments/1184453335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]